% Simple LaTeX template for Pandoc PDF generation
%
% This template is designed to work with Pandoc to produce a nicely formatted
% PDF from a Markdown source file.  It provides sensible defaults for
% typography and page layout and, importantly, defines a consistent
% appearance for code blocks written in different languages such as
% `bash` and `R`.  When you use this template with Pandoc, specify
% `--pdf‑engine=xelatex` (or `lualatex`) so that Unicode and modern fonts
% are supported.

\documentclass[11pt]{article}

% Page geometry: adjust margins to keep the text comfortably centred on
% the page without wasting too much space.
\usepackage[a4paper, margin=1in]{geometry}

% Better handling of Unicode and modern fonts.  XeLaTeX and LuaLaTeX
% understand UTF‑8 natively, so there is no need to load inputenc.
\usepackage{fontspec}

% Colour support for hyperlinks and code blocks.
\usepackage{xcolor}

% Hyperlinks in the PDF.  Coloured links make it clear that they are
% interactive without drawing distracting boxes around them.
\usepackage{hyperref}
\hypersetup{
  colorlinks=true,
  linkcolor=blue,
  urlcolor=blue,
  citecolor=blue
}

% Listings is used to format code blocks.  Pandoc will emit listings
% environments if the `--listings` flag is passed on the command line.
\usepackage{listings}

% Define a light gray background colour for code blocks.  The built-in
% `lightgray` colour provided by xcolor is used here.
\definecolor{codebg}{RGB}{250,250,250}

% Define custom languages for bash and R if they are not already
% provided by listings.  These definitions include a basic set of
% keywords and specify that comments begin with `#`.  You can
% customise the keyword lists to suit your own scripts.
\lstdefinelanguage{bash}{%
  alsoletter={-},%
  sensitive=true,
  morekeywords={sudo,cp,mv,ls,cd,echo,grep,awk,sed},%
  morecomment=[l]{\#},%
  morestring=[b]"%
}

\lstdefinelanguage{R}{%
  sensitive=true,
  morekeywords={library,function,if,else,for,in,next,break,TRUE,FALSE,NULL,NA},%
  morecomment=[l]{\#},%
  morestring=[b]"%
}

% Global settings for all listings.  These settings control the
% appearance of code blocks throughout the document.  You can adjust
% the font size, colours and framing here.  `basicstyle` sets the font
% used inside code blocks; `keywordstyle`, `commentstyle` and
% `stringstyle` set the colours of different token types.  The
% `backgroundcolor` applies a subtle background tint.  `frame`
% surrounds the code block with a thin border.  `breaklines=true`
% allows long lines to wrap instead of overflowing the page.
\lstset{
  basicstyle=\ttfamily\small,
  keywordstyle=\color{blue},
  commentstyle=\color{gray}\itshape,
  stringstyle=\color{magenta},
  backgroundcolor=\color{codebg},
  frame=single,
  rulecolor=\color{black!20},
  breaklines=true,
  columns=flexible,
  keepspaces=true,
  showstringspaces=false
}

% Title and author information come from Pandoc variables.  If no
% title is provided in the source document, these commands will be
% omitted.
$if(title)$
\title{$title$}
$endif$
$if(author)$
\author{$for(author)$$author$$sep$ \and $endfor$}
$endif$
$if(date)$
\date{$date$}
$endif$

\begin{document}

% Pandoc inserts a \tightlist command for tight lists (compact lists)
% when generating LaTeX.  Because this document uses a custom
% template instead of the built‑in one, the command needs to be
% defined to avoid an undefined control sequence error during
% compilation.  The definition below simply adjusts the list spacing.
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}%
  \setlength{\parskip}{0pt}%
}

$if(title)$
\maketitle
$endif$

% The body of the document is inserted here by Pandoc.
$body$

\end{document}